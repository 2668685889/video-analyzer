# 文件夹批量加载功能说明

## 功能概述

本次更新为视频分析系统添加了文件夹批量加载功能，用户现在可以选择包含视频文件的文件夹，系统会自动扫描并加载文件夹中的所有支持的视频文件。

## 功能特性

### 1. 文件夹选择
- 在主界面的"视频文件选择"区域新增了"选择文件夹"按钮
- 点击按钮后会打开文件夹选择对话框
- 支持选择任意包含视频文件的文件夹

### 2. 自动文件扫描
- 系统会递归扫描选择的文件夹及其所有子文件夹
- 自动识别所有支持格式的视频文件
- 支持的视频格式：mp4, avi, mov, mkv, webm
- 最大文件大小限制：100MB

### 3. 智能文件过滤
- 只加载系统支持的视频格式文件
- 自动跳过不支持的文件类型
- 文件扩展名检查不区分大小写

### 4. 用户友好提示
- 扫描完成后显示找到的视频文件数量
- 如果文件夹中没有支持的视频文件，会显示提示信息
- 扫描过程中如果出现错误，会显示详细的错误信息

## 使用方法

### 步骤1：选择文件夹
1. 在主界面找到"视频文件选择"区域
2. 点击"选择文件夹"按钮
3. 在弹出的文件夹选择对话框中选择包含视频文件的文件夹
4. 点击"选择文件夹"确认

### 步骤2：自动加载文件
1. 系统会自动扫描选择的文件夹
2. 在状态栏显示扫描进度和结果
3. 找到的视频文件会自动添加到文件列表中
4. 每个文件会显示文件名、大小和状态信息

### 步骤3：开始分析
1. 确认文件列表中的视频文件
2. 设置分析提示内容
3. 点击"开始分析"按钮进行批量分析

## 技术实现

### 核心方法

#### `browse_folder()`
- 功能：打开文件夹选择对话框
- 调用：`filedialog.askdirectory()`
- 参数：设置对话框标题

#### `scan_folder_for_videos(folder_path)`
- 功能：递归扫描文件夹中的视频文件
- 使用：`os.walk()` 遍历文件夹结构
- 过滤：根据文件扩展名过滤支持的视频格式
- 集成：调用现有的 `add_files_to_list()` 方法添加文件

### 界面更新

#### 按钮布局调整
- 原有布局：[选择视频文件] [清空列表]
- 新布局：[选择视频文件] [选择文件夹] [清空列表]
- 按钮间距：使用 `padx=(10, 0)` 保持一致的间距

#### 状态提示
- 成功扫描：显示找到的文件数量
- 无文件提示：显示支持的格式信息
- 错误处理：显示详细的错误信息

## 优势特点

### 1. 提高效率
- 无需逐个选择视频文件
- 一次性加载整个文件夹的视频内容
- 支持子文件夹递归扫描

### 2. 智能识别
- 自动过滤非视频文件
- 支持多种主流视频格式
- 文件大小自动验证

### 3. 用户体验
- 操作简单直观
- 实时状态反馈
- 友好的错误提示

### 4. 兼容性
- 与现有文件选择功能完全兼容
- 可以混合使用单文件选择和文件夹选择
- 统一的文件列表管理

## 使用场景

### 1. 批量视频分析
- 分析整个项目文件夹中的所有视频
- 处理按日期或类别组织的视频文件
- 批量处理从不同来源收集的视频

### 2. 工作流优化
- 减少重复的文件选择操作
- 提高大批量视频处理的效率
- 简化视频内容管理流程

### 3. 项目管理
- 快速加载项目相关的所有视频文件
- 支持复杂的文件夹结构
- 便于团队协作和文件共享

## 注意事项

### 1. 文件大小限制
- 单个视频文件不能超过100MB
- 超大文件会被自动跳过并在状态中标记

### 2. 格式支持
- 目前支持：mp4, avi, mov, mkv, webm
- 不支持的格式会被自动忽略

### 3. 性能考虑
- 大型文件夹扫描可能需要一些时间
- 建议避免选择包含大量文件的根目录

### 4. 错误处理
- 文件访问权限问题会显示错误提示
- 网络驱动器可能存在访问延迟

## 更新日志

### 版本 1.0.0
- 新增文件夹选择功能
- 实现递归文件扫描
- 添加智能文件过滤
- 集成现有文件管理系统
- 优化用户界面布局
- 完善错误处理和用户提示

---

**开发团队：唐山肖川科技**  
**更新时间：2025年8月24日**