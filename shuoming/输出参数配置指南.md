# 输出参数配置指南

## 问题分析

根据您提供的截图，您需要配置一个结构化的输出参数。从截图中可以看到：

1. **第一张截图**：显示了5个独立的字符串字段配置
   - video_serial_number (str, String)
   - video_content_summary (str, String)
   - detailed_content_description (str, String)
   - keyword_tags (str, String)
   - main_objects (str, String)

2. **第二张截图**：显示了正确的配置方式
   - 变量名：main_objects
   - 变量类型：Array<Object>
   - 异常处理：Object

## 正确的配置方式

### 步骤1：设置主输出类型

```
变量名：main_objects
变量类型：Array<Object>
```

### 步骤2：配置对象结构

在Array<Object>的对象结构中，需要添加以下5个字段：

| 字段名 | 类型 | 说明 |
|--------|------|------|
| video_serial_number | String | 视频序列号 |
| video_content_summary | String | 视频内容摘要 |
| detailed_content_description | String | 详细内容描述 |
| keyword_tags | String | 关键词标签 |
| main_objects | String | 主要对象 |

### 步骤3：具体配置操作

1. **主输出配置**：
   - 点击"输出"部分的"+"按钮
   - 变量名填写：`main_objects`
   - 变量类型选择：`Array<Object>`

2. **对象字段配置**：
   - 在Array<Object>下方会出现对象字段配置区域
   - 依次添加5个字段，每个字段类型都选择`String`

## 完整的JSON输出结构

配置完成后，输出的JSON结构应该是：

```json
{
  "main_objects": [
    {
      "video_serial_number": "VIDEO_001",
      "video_content_summary": "视频内容摘要",
      "detailed_content_description": "详细内容描述",
      "keyword_tags": "关键词标签",
      "main_objects": "主要对象"
    },
    {
      "video_serial_number": "VIDEO_002",
      "video_content_summary": "视频内容摘要",
      "detailed_content_description": "详细内容描述",
      "keyword_tags": "关键词标签",
      "main_objects": "主要对象"
    }
  ]
}
```

## 为什么要这样配置？

### 1. 支持多组数据
- `Array<Object>`结构可以处理多个视频的分析结果
- 每个数组元素代表一个视频的完整信息

### 2. 结构化输出
- 避免了扁平化字段的混乱
- 每组数据都有明确的边界
- 便于程序处理和数据解析

### 3. 类型一致性
- 所有字段都是String类型
- 避免了类型转换的复杂性
- 确保数据的一致性

## 常见错误配置

### ❌ 错误方式1：使用多个独立字段
```
video_serial_number (String)
video_content_summary (String)
detailed_content_description (String)
keyword_tags (String)
main_objects (String)
```
**问题**：无法处理多组数据，数据结构混乱

### ❌ 错误方式2：使用简单数组
```
main_objects (Array<String>)
```
**问题**：无法包含多个字段，结构不完整

### ✅ 正确方式：使用对象数组
```
main_objects (Array<Object>)
  ├── video_serial_number (String)
  ├── video_content_summary (String)
  ├── detailed_content_description (String)
  ├── keyword_tags (String)
  └── main_objects (String)
```

## 配置验证

配置完成后，您可以使用我们提供的`structured_data_formatter.py`工具来验证配置是否正确：

```python
from structured_data_formatter import StructuredDataFormatter

# 创建格式化器
formatter = StructuredDataFormatter()

# 测试数据
test_data = '''{
    "key0": "VIDEO_001",
    "key1": "测试视频摘要",
    "key2": "测试详细描述",
    "key3": "测试, 关键词",
    "key4": "测试对象"
}'''

# 格式化并获取JSON输出
result = formatter.format_data(test_data)
print(result)
```

## 总结

正确的配置方式是：
1. 主输出类型：`Array<Object>`
2. 对象包含5个String类型字段
3. 字段名使用英文命名
4. 支持多组数据的结构化输出

这样配置后，您的系统就能正确处理多个视频的分析结果，并以结构化的方式输出数据。