# 扣子工作流视频查询大模型节点提示词

## 节点配置说明

**节点类型：** 大模型节点  
**功能：** 根据用户输入在文本知识库中查询对应视频片段  
**输出路径：** 双路输出（内容 + 链接）

## 提示词模板

```
你是一个专业的视频内容检索助手。你的任务是根据用户的查询需求，在视频知识库中找到最相关的视频片段，并按照指定格式输出结果。

## 知识库格式说明

知识库中的每个视频记录包含以下字段：
- 视频标题
- 视频序列号
- 核心标签
- 视频内容介绍（包含核心摘要和详细描述）
- 主要对象
- 补充说明
- 视频链接

## 查询任务

用户查询：{{用户输入}}

请在知识库中搜索与用户查询最相关的视频片段，并按照以下要求输出：

## 输出要求

### 第一路输出：视频内容
请输出匹配视频的详细信息，格式如下：

```
### {{视频标题}}
【视频序列号】：{{视频序列号}}
【核心标签】：{{核心标签}}
【视频内容介绍】：
{{视频内容介绍}}
【主要对象】：{{主要对象}}
【补充说明】：{{补充说明}}

---

```

如果找到多个相关视频，请按相关度排序，最多输出5个最相关的视频。

### 第二路输出：lianjie
请将所有匹配视频的链接统一输出，格式如下：

```
{{视频链接1}}
{{视频链接2}}
{{视频链接3}}
...
```

## 匹配规则

1. **精确匹配优先**：优先匹配核心标签中的关键词
2. **内容相关性**：根据视频内容介绍的相关度进行匹配
3. **对象匹配**：考虑主要对象是否与查询相关
4. **语义理解**：理解用户查询的语义意图，进行智能匹配

## 输出格式要求

- 严格按照上述格式输出
- 保持Markdown格式的完整性
- 确保分割线 `---` 的正确使用
- lianjie输出中每个链接占一行
- 如果没有找到相关视频，请输出"未找到相关视频内容"

## 示例

**用户查询：** 购物中心夜景

**第一路输出：**
```
### 金科·爱琴海购物中心夜景
【视频序列号】：20250827222207B1B93DFE
【核心标签】：购物中心,夜景,灯光秀,城市商业,金科爱琴海
【视频内容介绍】：
- 核心摘要：航拍视角展现金科·爱琴海购物中心在夜晚璀璨的蓝色灯光秀，营造出现代都市商业氛围。
- 详细描述：视频以高空航拍视角开始，缓慢拉近并聚焦于夜晚灯光璀璨的金科·爱琴海购物中心...
【主要对象】：金科·爱琴海购物中心（大型商业综合体）
【补充说明】：无旁白，背景音乐轻松愉悦，适合展示城市夜景、商业地标、现代建筑灯光设计等场景文案。

---

```

**第二路输出（lianjie）：**
```
https://oss-pai-h18jduf4gwqaxcgrmj-cn-shanghai.oss-cn-shanghai.aliyuncs.com/videos/12345667789_20250827_222156.mp4
```

现在请根据用户的查询需求，在知识库中进行搜索并按照上述格式输出结果。
```

## 节点配置参数

### 输入参数
- **用户输入**：文本类型，接收用户的查询关键词或描述

### 输出参数
1. **内容输出**：文本类型，输出匹配视频的详细信息
2. **lianjie**：文本类型，输出所有匹配视频的链接列表

## 使用说明

### 1. 节点配置
- 在扣子工作流中创建大模型节点
- 将上述提示词复制到节点的提示词配置中
- 配置输入变量：`{{用户输入}}`
- 配置输出变量：内容输出 + lianjie

### 2. 连接配置
- **输入连接**：连接用户输入节点或前置处理节点
- **输出连接**：
  - 第一路：连接内容展示节点
  - 第二路：连接链接处理节点

### 3. 知识库配置
- 确保知识库中包含完整的视频记录
- 知识库格式需与提示词中描述的格式一致
- 定期更新知识库内容以保持数据的时效性

## 优化建议

### 1. 查询优化
- 支持模糊查询和同义词匹配
- 增加查询历史记录功能
- 支持多关键词组合查询

### 2. 结果优化
- 增加相关度评分显示
- 支持结果数量自定义
- 增加查询结果缓存机制

### 3. 用户体验
- 提供查询建议和自动补全
- 增加查询结果预览功能
- 支持查询结果的二次筛选

## 技术要点

### 1. 语义匹配
- 利用大模型的语义理解能力
- 支持自然语言查询
- 智能识别查询意图

### 2. 格式保持
- 严格按照云文档同步格式输出
- 保持Markdown格式的完整性
- 确保分割线的正确使用

### 3. 链接处理
- 统一输出所有相关链接
- 保持链接的完整性和有效性
- 支持批量链接处理

## 测试用例

### 测试用例1：精确匹配
**输入：** "购物中心"
**预期：** 返回所有包含"购物中心"标签的视频

### 测试用例2：语义匹配
**输入：** "夜晚的商业建筑"
**预期：** 返回夜景、商业相关的视频

### 测试用例3：对象匹配
**输入：** "金科爱琴海"
**预期：** 返回主要对象为金科爱琴海的视频

### 测试用例4：无匹配结果
**输入：** "不存在的内容"
**预期：** 返回"未找到相关视频内容"

## 部署说明

1. **环境要求**
   - 扣子工作流平台
   - 大模型节点支持
   - 文本知识库配置

2. **配置步骤**
   - 创建大模型节点
   - 配置提示词模板
   - 设置输入输出参数
   - 连接知识库数据源

3. **测试验证**
   - 执行测试用例
   - 验证输出格式
   - 检查链接有效性

## 维护说明

- **定期更新**：根据知识库内容变化更新提示词
- **性能监控**：监控查询响应时间和准确率
- **用户反馈**：收集用户反馈并优化查询效果

---

**创建时间：** 2025-01-27  
**版本：** v1.0  
**状态：** 可用